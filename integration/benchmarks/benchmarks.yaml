ntimes: 1
output_folder: test_results
ig_path: ig
ig_flags: [ "--verify-image=false" ]
ig_runtime: "docker"
gadget_tag: "latest"
# time each gadget runs for
gadget_run_duration: 10
# time we wait to run the gadget after the generator starts
warm_up_duration: 2
tests:
  trace_dns:
    gadgetName: trace_dns
    server:
      image: ghcr.io/mauriciovasquezbernal/bench
      cmd: /bench --events=dns-server
    generator:
      image: ghcr.io/mauriciovasquezbernal/bench
      cmd: /bench --events=dns:server={serverIP}:5353 --events-per-second={eventsPerSecond}
    eventsPerSecond: [ 1024, 2048, 4096, 8192, 16384 ]
  trace_exec:
    gadgetName: trace_exec
    generator:
      image: ghcr.io/mauriciovasquezbernal/bench
      cmd: /bench --events=exec --events-per-second={eventsPerSecond}
    eventsPerSecond: [ 16384, 32768 ]
  trace_open:
    gadgetName: trace_open
    generator:
      image: ghcr.io/mauriciovasquezbernal/bench
      cmd: /bench --events=open --events-per-second={eventsPerSecond}
    eventsPerSecond: [ 131072, 262144, 524288, 1048576 ]
  trace_tcp:
    gadgetName: trace_tcp
    server:
      image: ghcr.io/mqasimsarfraz/bench
      cmd: /bench --events=tcp-server
    generator:
      image: ghcr.io/mqasimsarfraz/bench
      cmd: /bench --events=tcp:server={serverIP}:8080 --events-per-second={eventsPerSecond}
    eventsPerSecond: [ 1024, 2048, 4096, 8192, 16384 ]
